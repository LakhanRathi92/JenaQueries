import java.io.ByteArrayOutputStream;
import java.nio.ByteBuffer;



public class VariableLengthEnc_Dec {
	public static int MAX_LENGTH = 268435455;
	
	public static byte[] Encode(int length){
		
		if (length > MAX_LENGTH || length < 0){
			return null; 
		}
		ByteArrayOutputStream byteStream = new ByteArrayOutputStream();		
		byte[] encodedSizeInBytes = null;
		do
		{
			byte byteRepresentation = (byte) (length % 128);			
			length = length / 128;
			
			if(length > 0)
			{
				byteRepresentation |= 0X80; //Setting last bit as 1
			}			
			byteStream.write(byteRepresentation);
		} while(length > 0);
		
		encodedSizeInBytes = byteStream.toByteArray();
		return encodedSizeInBytes;		
		
	}
	
	
	public static int Decode(byte[] decodeIt){
		int multiplier = 1;
		int value = 0;
		byte currentByte;
		
		do
		{
			int ind = 0;
			currentByte = decodeIt[ind];
			value += (currentByte & 127) * multiplier;
			multiplier *= 128;
			ind++;
		}while((currentByte & 128) !=0);
	}	
}
